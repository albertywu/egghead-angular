// Generated by CoffeeScript 1.6.3
(function() {
  var app;

  app = angular.module('myApp', ['ngRoute']);

  app.config(function($routeProvider) {
    return $routeProvider.when('/', {
      templateUrl: 'homepage.html',
      resolve: {
        app: function($q, $timeout) {
          var deferred;
          deferred = $q.defer();
          $timeout(function() {
            return deferred.resolve();
          }, 2000);
          return deferred.promise;
        }
      }
    }).when('/map/:country/:state/:city', {
      templateUrl: 'app.html',
      controller: 'AppCtrl',
      redirectTo: function(routeParams, path, search) {
        console.log(routeParams);
        console.log(path);
        console.log(search);
        if (routeParams.country !== 'USA') {
          return "/map/USA/" + routeParams.state + "/" + routeParams.city;
        }
      }
    }).otherwise({
      redirectTo: '/'
    });
  });

  app.controller('AppCtrl', function($scope, $routeParams) {
    return $scope.model = {
      message: "You found " + $routeParams.country + " > " + $routeParams.state + " > " + $routeParams.city
    };
  });

}).call(this);
